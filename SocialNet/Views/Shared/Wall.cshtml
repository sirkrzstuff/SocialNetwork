@using Microsoft.AspNet.Identity;
@model SocialNet.ViewModels.ConnectionViewModel

<div class="New-status">
    @using (Html.BeginForm("Create", "UserStatus"))
    {
        @Html.Action("Create", "UserStatus")
    }
</div>   
@foreach (var user in Model.ConnectionUserStatuses)
{

    <div class="StatusForm">
        <p style="color: grey;">@user.Author | @user.StatusDate | @user.Id</p>
        <p>@user.StatusBody</p>
        <div>
            @if (Model.ConnectionComments != null)
            {
                //foreach (var c in Model.cn_comments.Where(s => s.UserStatusId == u.Id))
                foreach (var comment in Model.ConnectionComments.Where(status => status.UserStatusId == user.Id))
                {
                    <div class="CommentForm">
                        @*<p style="color: grey;">@c.Author | @c.CommentDate | @c.Id</p>*@
                        <p>@comment.CommentBody</p>
                    </div>
                }
            }
        </div>
        <div>
            @using (Html.BeginForm("Create", "Comments"))
            {
                @Html.Action("Create", "Comments", new { UserStatusId = user.Id })
            }
        </div>
          
    </div>
}


 